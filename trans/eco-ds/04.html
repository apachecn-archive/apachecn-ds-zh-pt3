<html lang="en">
<head><title>Forecasting Growth</title>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<link href="../css/springer_epub.css" rel="styleSheet" type="text/css"/>
</head>
<body>
 
<!--Begin Abstract--><h1 class="ChapterTitle" lang="en">4.预测增长</h1>

 
<!--End Abstract--><p class="Para" id="Par2">时间序列分析包括检查序列数据中的模式和趋势，以预测序列的值。有无数的时间序列模型，包括自回归移动平均(ARIMA) (p，d，q)，它在先前和当前值之间应用线性变换(自回归)，综合(随机行走)和移动平均。一个 ARIMA 模型包括季节性，称为季节性 ARIMA (P，D，Q) x (p，D，Q)。本章考虑加法模型，它通过平滑参数识别非线性。出于本书的目的，您可以将时间序列分析视为线性回归的扩展，因为它研究的是序列数据。主要的区别在于，在时间序列分析中，您是按时间顺序排列数据的，这使得假设比线性回归模型中的假设严格得多。在训练模型之前，您必须使用增强的 Dickey-Fuller 测试来测试<em class="EmphasisTypeItalic ">的平稳性</em>，测试白噪声的存在，并测试自相关性。</p>
<p>本章调查了美国每年生产的成品和服务的市场价值趋势(见等式 4-1):</p>
<ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par4">引导运动——持续向上的运动是向上的趋势，持续向下的运动是向下的趋势</p></li>
<li><p class="Para" id="Par5">季节性——持续的逐年变化(上坡或下坡)</p></li>
<li><p class="Para" id="Par6">不规则成分——也称为残余成分</p></li>
</ul>

<p class="Para" id="Par7">最后，模型预测未来的经济活动。注意，它没有描述数据的中心趋势，因为前一章已经描述了。</p>
<p class="Para" id="Par8">本章使用了由脸书开发的 Python 库 Prophet。它建立在加法模型的基础上。</p>
<p class="Para" id="Par9">在继续之前，请确保您的环境中安装了<code>fbprophet</code>库。要在 Python 环境中安装<code>fbprophet</code>库，请使用<code>pip install fbprophet</code>。同样，要在 Conda 环境中安装库，使用<code>conda install -c conda-forge fbprophet</code>。你还需要安装<code>pystan</code>库。要在 Python 环境中这样做，请使用<code>pip install pystan</code>，在 Conda 环境中，请使用<code>conda install -c conda-forge pystan</code>。</p>
<p>清单<a href="#PC1"> 4-1 </a>提取美国 GDP 增长数据(以年百分比表示)并绘制数列(见图<a href="#Fig1"> 4-1 </a>)。</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig1_HTML.png" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig1_HTML.png" style="width:43.12em"/></p>
<p>图 4-1</p><p class="SimplePara">美国 GDP 增长线图</p>


<pre>import wbdata
import matplotlib.pyplot as plt
%matplotlib inline
country = ["USA"]
indicator = {"FI.RES.TOTL.CD":"gdp_growth"}
df = wbdata.get_dataframe(indicator, country=country, convert_date=True)
df.plot(kind="line",color="green",lw=4)
plt.title("The U.S. GDP growth (annual %)")
plt.xlabel("Dates")
plt.ylabel("GDP growth (annual %)")
plt.legend(loc="best")
plt.show()

Listing 4-1The U.S. GDP Growth (Annual Percentage) Line Plot


</pre>
<p>图<a href="#Fig1"> 4-1 </a>展示了自 20 世纪 60 年代初以来美国 GDP 增长的上升趋势。2012 年初，美国国内生产总值增长下降，然后在 2015 年恢复增长势头。列表<a href="#PC2"> 4-2 </a>用平均值替换任何缺失值。</p>
<pre>df["gdp_growth"] = df["gdp_growth"].fillna(df["gdp_growth"].mean())

Listing 4-2Replacing Missing Values with the Mean Value


</pre>
<h2 class="Heading">描述统计学</h2>
<p>清单<a href="#PC3"> 4-3 </a>检索表<a href="#Tab1"> 4-1 </a>，该表概述了描述性统计数据。</p>
<p>表 4-1</p><p class="SimplePara">描述统计学</p>


<table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"/>
<col class="tcol2 align-left"/>
</colgroup>
<thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"> </th>
<th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">gdp _ 增长</p>
</th>
</tr>
</thead>
<tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">数数</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">6.100000e+01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">平均</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">标准</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.646309e+11</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">福建话</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.483107e+10</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">25%</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">4.416213e+10</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">50%</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.441768e+11</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">75%</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.904648e+11</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">最大</p>
</td>
<td style="text-align: left;"><p class="SimplePara">6.283697e+11</p>
</td>
</tr>
</tbody>
</table>

<pre>df.describe()

Listing 4-3Descriptive Statistics


</pre>
<p>表<a href="#Tab1"> 4-1 </a>显示:</p>
<ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par14">美国 GDP 增长均值为 6.000000e+01。</p></li>
<li><p class="Para" id="Par15">美国 GDP 增长独立数据点偏离均值 1.748483e+11。参见清单<a href="#PC4"> 4-4 </a>。</p></li>
</ul>

<p>
 
</p>
<pre>df.plot(kind="box",color="green")
plt.title("The U.S. GDP growth (annual %) distribution")
plt.ylabel("Values")
plt.show()

Listing 4-4The U.S. GDP Growth Distribution


</pre>
<p> 
</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig2_HTML.jpg" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig2_HTML.jpg" style="width:43.12em"/></p>
<p>图 4-2</p><p class="SimplePara">美国 GDP 增长分布</p>


<p>图<a href="#Fig2"> 4-2 </a>显示美国 GDP 增长数据中存在离群值。清单<a href="#PC5"> 4-5 </a>用缺失值替换异常值，并检查新的分布。</p>
<pre>df['gdp_growth'] = np.where((df["gdp_growth"] &gt; 2.999999e+11),df["gdp_growth"].mean(),df["gdp_growth"])
df.plot(kind="box",color="green")
plt.title("The U.S. GDP growth (annual %) distribution")
plt.ylabel("Values")
plt.show()

Listing 4-5Replacing the Outliers


</pre>
<p> 
</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig3_HTML.jpg" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig3_HTML.jpg" style="width:43.12em"/></p>
<p>图 4-3</p><p class="SimplePara">美国 GDP 增长盒图</p>


<p class="Para" id="Par18">图<a href="#Fig3"> 4-3 </a>显示不再有离群值。</p>
<h3 class="Heading">平稳性检测</h3>
<p>如果数据中存在随机性(单位根)，则序列数据是平稳的，表明变量的均值几乎不变或接近均值。大多数时间序列分析模型都假设一个序列有一个单位根。最常见的平稳性测试是扩展的 Dickey-Fuller 测试(见清单<a href="#PC6">4-6</a>)—它扩展了 Dickey-Fuller 测试。当应用扩展的 Dickey-Fuller 检验时，确保 p 值是显著的。表<a href="#Tab2"> 4-2 </a>定义了滞后的数量、F 统计百分比和 p 值。</p>
<p>表 4-2</p><p class="SimplePara">扩充的 Dickey-Fuller 结果</p>


<table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"/>
<col class="tcol2 align-left"/>
</colgroup>
<thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">可变的</p>
</th>
<th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">价值</p>
</th>
</tr>
</thead>
<tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">ADF F%统计</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">-0.962163</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">p 值</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">0.766813</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">使用的滞后数量</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">0.000000</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">观察数量</p>
</td>
<td style="text-align: left;"><p class="SimplePara">60.000000</p>
</td>
</tr>
</tbody>
</table>

<pre>from statsmodels.tsa.stattools import adfuller
adfullerreport = adfuller(df["gdp_growth"])
adfullerreportdata = pd.DataFrame(adfullerreport[0:4],
                                  columns = ["Values"],
                                  index=["ADF F% statistics",
                                         "P-value",
                                         "No. of lags used",
                                         "No. of observations"])
adfullerreportdata

Listing 4-6Augmented Dickey-Fuller Results


</pre>
<p class="Para" id="Par20">表<a href="#Tab2"> 4-2 </a>显示，在 p 值大于 0.5 的情况下，序列不存在平稳性。通常，您会在建模之前区分系列。请注意，测试持有一个零假设，这表明该序列不是平稳的；它还持有另一个假设，即假设序列是平稳的。</p>

<h3 class="Heading">随机白噪声检测</h3>
<p>清单<a href="#PC7"> 4-7 </a>生成一组随机变量，并检查数据的平均值是否接近 0(见图<a href="#Fig4"> 4-4 </a>)。</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig4_HTML.png" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig4_HTML.png" style="width:43.12em"/></p>
<p>图 4-4</p><p class="SimplePara">随机白噪声</p>


<pre>from pandas.plotting import autocorrelation_plot
randval = np.random.randn(1000)
autocorrelation_plot(randval)
plt.title("Random white noise")
plt.show()

Listing 4-7Random White Noise


</pre>
<p class="Para" id="Par22">图<a href="#Fig4"> 4-4 </a>显示平均值在 0 左右。这表明不同滞后期的序列模式是相似的。</p>


<h2 class="Heading">自相关检测</h2>
<p>在简单线性回归中，相关性分析在模型开发中起着至关重要的作用。然而，时间序列分析感兴趣的是独立观测值(y)和随时间变化的独立观测值(y <sub> t </sub>)之间的序列统计相关性。清单<a href="#PC8"> 4-8 </a>是一个自相关函数，它解释了不同滞后之间的自相关(见图<a href="#Fig5"> 4-5 </a>)。当自相关系数在图<a href="#Fig5"> 4-5 </a>的蓝色区域内时，它们是显著的。</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig5_HTML.png" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig5_HTML.png" style="width:43.12em"/></p>
<p>图 4-5</p><p class="SimplePara">美国国内生产总值增长率(年百分比)ACF</p>


<pre>from statsmodels.graphics.tsaplots import plot_acf
plot_acf(df["gdp_growth"])
plt.title("")
plt.xlabel("Lag")
plt.ylabel("ACF")
plt.title("The U.S. GDP growth (annual %) autocorrelation")
plt.show()

Listing 4-8The U.S. GDP Growth (Annual %) ACF


</pre>
<p>清单<a href="#PC9"> 4-9 </a>展示了<code>lag1</code>中的独立观察结果(见图<a href="#Fig6"> 4-6 </a>)。滞后图有助于解释相对于相关性的任何滞后(y <sub> t </sub>之间的空间)。</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig6_HTML.png" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig6_HTML.png" style="width:43.12em"/></p>
<p>图 4-6</p><p class="SimplePara">美国 GDP 增长滞后图</p>


<pre>from pandas.plotting import lag_plot
lag_plot(df["gdp_growth"])
plt.title("The U.S. GDP growth (annual %) lag 1")
plt.show()

Listing 4-9The U.S. GDP Growth (Annual %) Lag Plot


</pre>
<p class="Para" id="Par25">图<a href="#Fig6"> 4-6 </a>显示<code>lag1</code>中 y <sub> t </sub>与 y <sub> (t+1) </sub>之间存在关联关系。</p>

<h2 class="Heading">不同的单变量时间序列模型</h2>
<p class="Para" id="Par26">本章将时间序列分析应用于连续变量。以下部分包含不同时间序列分析模型的概述。</p>
<h3 class="Heading">自回归综合移动平均线</h3>
<p class="Para" id="Par27">自回归综合移动平均是一种 ARIMA 模型，这意味着它在先前值和当前值(自回归)、综合(随机游走)和移动平均(先前值和当前值的权重)之间应用线性变换。这是最常见的时间序列模型。该模型假设前面的值之间存在线性关系，并且序列是平稳的。不仅如此，它还考虑了当前权重和后续权重值之间的差异。</p>

<h3 class="Heading">季节性自回归综合移动平均模型</h3>
<p>季节性自回归综合移动平均线(SARIMA)扩展了 ARIMA 模型，该模型考虑了季节性(持续的逐年移动——上升或下降)。方程式<a href="#Equ1"> 4-1 </a>就是萨里玛公式。<p> <img alt="$$ {Y}_t={S}_t+{T}_t+{I}_t+\varepsilon i $$" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Chapter_TeX_Equ1.png" style="width:9.16em"/> </p>(方程式 4-1)</p>
<p class="Para" id="Par29">其中<em class="EmphasisTypeItalic "> S </em> <sub> <em class="EmphasisTypeItalic "> t </em> </sub>代表季节性，<em class="EmphasisTypeItalic "> T </em> <sub> <em class="EmphasisTypeItalic "> t </em> </sub>代表趋势，<em class="EmphasisTypeItalic "> I </em> <sub> <em class="EmphasisTypeItalic "> t </em> </sub>代表不规则性，<em class="EmphasisTypeItalic "> ε </em> <sub> <em class="EmphasisTypeItalic "> i </em> </sub>是误差项。萨里玛考虑季节性，不考虑公共假期等事件的影响。为了解决这个问题，开发人员经常使用加法模型。</p>


<h2 class="Heading">加法模型</h2>
<p>加法模型考虑了公共假日等事件的影响。它调整函数中的非线性属性，并通过包含平滑参数和添加非线性将预测缩小到某个置信区间。开发加法模型最可靠的库是 FB Prophet。清单<a href="#PC10"> 4-10 </a>重新利用数据(见表<a href="#Tab3"> 4-3 </a>)。</p>
<p>表 4-3</p><p class="SimplePara">美国国内生产总值增长(年%)再利用数据</p>


<table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"/>
<col class="tcol2 align-left"/>
<col class="tcol3 align-left"/>
<col class="tcol4 align-left"/>
</colgroup>
<thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">日期</p>
</th>
<th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">gdp _ 增长</p>
</th>
<th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">从记号处开始重复一遍</p>
</th>
<th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">y</p>
</th>
</tr>
</thead>
<tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2020-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2020-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2019-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2019-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2018-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2018-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2017-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2017-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2016-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.822831e+11</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">2016-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">...</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">...</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">...</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">...</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1964-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.672549e+10</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.672549e+10</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1964-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1963-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.687865e+10</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.687865e+10</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1963-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1962-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.725246e+10</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.725246e+10</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1962-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1961-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.882553e+10</p>
</td>
<td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.882553e+10</p>
</td>
<td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">1961-01-01</p>
</td>
</tr>
<tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">1960-01-01</p>
</td>
<td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.966416e+10</p>
</td>
<td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">1.966416e+10</p>
</td>
<td style="text-align: left;"><p class="SimplePara">1960-01-01</p>
</td>
</tr>
</tbody>
</table>

<pre>df = df.reset_index()
df["ds"] = df["gdp_growth"]
df["y"] = df["date"]
df.set_index("date")

Listing 4-10Repurposing the U.S. GDP Growth (Annual %) Data


</pre>

<h2 class="Heading">附加模型开发</h2>
<p>使用 FB Prophet 库开发附加模型相当简单。列表<a href="#PC11"> 4-11 </a>调用<code>Prophet()</code>并训练模型。</p>
<pre>from fbprophet import Prophet
m = Prophet()
m.fit(df)

Listing 4-11Train Additive Model


</pre>
<h3 class="Heading">加法模型预测</h3>
<p>清单<a href="#PC12"> 4-12 </a>构建了未来三年的未来数据框架，并绘制了加法模型预测的数据点。</p>
<pre>future = m.make_future_dataframe(periods=3)
forecast = m.predict(future)
m.plot(forecast)
plt.title("The U.S. GDP growth (annual %) forecast")
plt.xlabel("Date")
plt.ylabel("GDP growth (annual %)")
plt.show()

Listing 4-12Plot U.S. GDP Growth Forecast


</pre>
<p> 
</p>
<p><img alt="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig7_HTML.png" src="../images/516940_1_En_4_Chapter/516940_1_En_4_Fig7_HTML.png" style="width:43.12em"/></p>
<p>图 4-7</p><p class="SimplePara">美国国内生产总值增长预测</p>


<p class="Para" id="Par33">图<a href="#Fig7"> 4-7 </a>显示了美国 GDP 增长的激增。下一节讨论季节分解——时间序列分析的一个重要方面。但是，考虑到这些数据的结构，我们不提供示例。很明显，该图没有正确显示日期。</p>


<h2 class="Heading">季节性分解</h2>
<p>季节性分解包括将序列数据分割成几个部分，这样开发人员可以更好地理解序列。这些组件包括:</p>
<ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par35">季节性，代表一种长期的固定模式。</p></li>
<li><p class="Para" id="Par36">趋势，是一个时间序列中暂时的持续模式。</p></li>
<li><p class="Para" id="Par37">不规则性，代表美国 GDP 增长数据的可变性。</p></li>
</ul>

<p class="Para" id="Par38">考虑到数据收集的频率和美国 GDP 增长只有几个数据点的事实，本章不包括季节分解。他们每年收集数据，我们无法将季节性分解为每日和每周的季节性。然而，理解季节分解是如何工作的是很重要的。</p>

<h2 class="Heading">结论</h2>
<p class="Para" id="Par39">本章介绍了一个时间序列分析模型，称为加法模型。在拟合模型之前，您学习了如何通过测试平稳性、白噪声、自相关和正态性来确认时间序列分析假设。此后，本章介绍了趋势、季节性和残差。该模型预测了美国年度 GDP 增长的主要上升趋势。下一章介绍一种叫做<em class="EmphasisTypeItalic ">逻辑回归</em>的分类方法。当您想要操作预测变量以生成二进制输出值时，可以使用此模型。</p>



</body>
</html>