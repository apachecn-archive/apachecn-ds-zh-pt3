# 四、RStudio 项目

到目前为止，我们所学的知识为 R 编程增加了大量的集成。但是我们缺少一种方法将所有这些整合在一起，形成一种我们可以重用的格式。这就是 RStudio 项目发挥作用的地方。

RStudio 项目用于组织分析中使用的所有代码、报告和任何其他资产。当我们创建一个项目时，RStudio 将提供所需的文件和您的项目类型所需的一切。

## 创建新的工作室项目

如图 [4-1](#Fig1) 所示，从 RStudio 屏幕顶部的菜单栏中选择“文件”，然后选择“新建项目”，创建一个新的 RStudio 项目。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig1_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig1_HTML.jpg)

图 4-1

创建新的工作室项目

现在会出现一个如图 [4-2](#Fig2) 所示的对话框，其中提供了一些创建新 RStudio 项目的选项。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig2_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig2_HTML.jpg)

图 4-2

工作室项目选项

通常，您只需选择第一个选项“新目录”，这将创建一个您可以命名的新文件夹。所有配置文件都将出现在这个新文件夹中。但是，如果您已经有了一些想要开始的代码文件，您可以选择第二个选项，“现有目录”。最后，如果您已经为一个已经存在的项目建立了一个类似 git 的版本控制系统，那么您可以选择第三个选项，“版本控制”。

### 项目类型

对于这个例子，我们点击“New Directory”来创建一个新的项目。出现的屏幕将显示 RStudio 项目类型列表，如图 [4-3](#Fig3) 所示。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig3_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig3_HTML.jpg)

图 4-3

工作室项目类型

前三种项目类型是您最常使用的。前三个项目之后的项目都包括用于特殊用例的专门代码。描述中“Rcpp”中的项目都是用来集成 C++代码库的。带有“devtools”的项目用于创建带有 devtools 库的 R 包，而 sparklyr 项目将创建一个与 Spark 一起工作的包。

“打包”项目是为了创建一组可重用的 R 对象。这比我们在这一章中所做的要高级一点，我们将在后面回到这一点。请注意，当您拥有您认为可以跨项目使用的代码时，您可以创建 RStudio 项目包。

在本例中，选择如图 [4-4](#Fig4) 所示的“新建项目”来创建最适合分析的项目。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig4_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig4_HTML.jpg)

图 4-4

预期寿命工作室项目

我们将该项目命名为“life _ expectancy ”,因为我们将从[数据中进行一些数据探索。显示预期寿命的网站。现在，选择您想要保存项目的目录(在 Mac 上称为文件夹),然后单击“创建项目”按钮来创建这个 RStudio 项目。](http://data.gov)

### 工作室项目参观

现在我们的项目有了新的空间。这个新的 RStudio 项目将存储在您在如图 [4-4](#Fig4) 所示的对话框中键入的文件夹中。RStudio 项目拥有自己的环境，因此如果您切换项目，您的工作将会得到保存和组织。这对于代码文件和您可能需要进行分析的任何其他东西都是正确的。让我们看看为我们设置了什么。

在图 [4-5](#Fig5) 中，你可以看到 RStudio 项目看起来与我们在前面章节中已经看到的很接近。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig5_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig5_HTML.jpg)

图 4-5

新建项目屏幕

然而，在图 [4-5](#Fig5) 中，你可以从正常的启动屏幕中看到两个变化。一个新文件出现在屏幕右下角，带有您的项目名称和“Rproj”文件扩展名。该文件包含项目的所有设置。如果您仔细查看您的文件资源管理器，您可以看到这个文件位于您在子目录下选择的与您的项目同名的目录中。

如果你点击屏幕右上方的项目名称，你会发现一个有用的快捷方式列表，如图 [4-6](#Fig6) 所示。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig6_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig6_HTML.jpg)

图 4-6

项目快捷方式

您可以打开和关闭项目，快速导航到最近打开的项目，并专门为此项目设置 RStudio 选项。

项目选项保存在为项目创建的文件夹中扩展名为“Rproj”的文件中。您可以点击该文件打开您的项目选项，或者在图 [4-6](#Fig6) 所示的快捷方式列表中选择选项。当你这样做时，你会看到一个类似图 [4-7](#Fig7) 的屏幕，它列出了你可以为这个项目设置的选项。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig7_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig7_HTML.jpg)

图 4-7

项目选项

这些项目选项是从为 RStudio 设置的全局选项继承而来的，在大多数情况下，您可以不去管它们。前两个屏幕是最直接有用的。“General”选项卡为您提供了保存分析状态的选项。默认设置是保存您的数据环境和 R 历史。有时，如果您的项目需要加载大量数据集，您可能希望关闭这些选项，因为这会使您的项目需要更长时间才能打开。一般来说，最好保持默认值不变。

下一个选项卡是“代码编辑”，如图 [4-8](#Fig8) 所示；这使您可以控制代码编辑器的工作方式。

![img/478254_1_En_4_Chapter/478254_1_En_4_Fig8_HTML.jpg](img/478254_1_En_4_Chapter/478254_1_En_4_Fig8_HTML.jpg)

图 4-8

代码编辑选项

您通常会希望保留这些默认设置。确保第一个选项“索引源文件”保持选中，因为这将确保我们稍后将讨论的一些代码工具能够正确工作。

其余四个选项选项卡包含我们将在本书稍后部分重新讨论的功能设置。这些选项通常用于报告、构建包和其他我们还没有准备好集成到工作流中的特殊功能。

## 结论

在本章中，我们学习了如何设置 RStudio 项目。这将有助于我们在开始进行多重分析时保持组织性和高效性。每个 RStudio 项目都有自己的文件夹、文件集、数据集和环境。在下一章中，我们将通过一个例子来了解在 RStudio 项目中组织代码将如何帮助您建立一个高效的工作流。