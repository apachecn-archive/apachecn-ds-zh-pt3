# 3.RStudio 视图

让我们继续参观 RStudio IDE。RStudio 有一个四窗格的窗口布局，我们在上一章已经仔细研究过其中的两个窗格。我们看到了控制台屏幕，您可以在其中编写交互式 R 代码，我们还看到了环境和历史屏幕，您可以在其中看到 R 环境的状态。我们的数据框也在第三个窗格中打开，但我们可以使用 RStudio 界面的这一部分做更多事情。让我们看看我们现在将使用的其余屏幕。

## 文件、图、包、帮助和查看器窗格

默认情况下，右下方的窗格将包含标签为文件、绘图、包、帮助和查看器的选项卡。“文件”选项卡将显示当前工作文件夹中的文件。工作文件夹是 R 用来保存你的工作的文件夹。这个面板实际上是集成到 RStudio 中的 Windows 资源管理器或 Mac Finder 应用程序。

### 文件

“文件”选项卡包含方便的功能，您可以使用这些功能打开文件并对文件进行常规处理，而无需离开 RStudio。这包括删除和重命名文件等任务。您也可以设置 R 工作文件夹，如图 [3-1](#Fig1) 所示。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig1_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig1_HTML.jpg)

图 3-1

文件选项卡

### 情节

您可以使用 Plots 选项卡来查看您在 R 分析过程中创建的图。如果您点击该选项卡，您将看到一个带有几个功能按钮的空白屏幕，如图 [3-2](#Fig2) 所示。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig2_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig2_HTML.jpg)

图 3-2

绘图视图功能

您可以查看地块，将地块导出到文件，还可以导航您创建的地块集。此微件可帮助您在浏览和调查数据时保持有序。为了进一步演示这个特性，我们需要跳到控制台屏幕，做一些数据管理，并创建一个图。

#### 数据管理简介

我们可以使用我们在前一章中导入的数据。如果您一直在跟踪，该数据被命名为`Food_Display_Table`。在我们使用这些数据绘制图表之前，我们需要做一些“数据筛选”。数据整理是重新组织数据以使其为您的分析服务的过程。

### 注意

我们在上面交替使用术语“数据集”和“数据框”;然而，我们在 R 中使用的对象的技术名称是“数据框”。术语“数据集”是一个通用术语，适用于任何分析环境中的任何数据集。

对于这个图，我们想看一下`Food_Display_Table`数据帧中的两列:`Calories`和`Portion_Amount`。看起来这两个项目可能有关系，所以有必要看看使用图表是否会帮助我们看到任何模式，这些模式可能会作为帮助我们理解这些数据告诉我们什么的线索。

我想做的第一件事是检查我感兴趣的列的数据类型。您可以使用 R 类函数来做到这一点:

```
class(Food_Display_Table$Calories)

```

您有了函数、类的名称，并且在括号中包含了您想要检查的对象。我们已经看到了数据帧名称(`Food_Display_Table`)，但现在我们还有一个美元符号`$`和变量名称`Calories`。R 中的美元符号在数据框中用于引用列。数据框`Food_Display_Table`中的每一列都可以这样引用。上面我们使用了类函数来检查`Calories`列的数据类型。它返回了“字符”。

对于我们的图，我们需要数据是数字。幸运的是，它超级容易改变；使用 as.numeric 函数将数据列转换为数字，然后将结果赋回数据框:

```
Food_Display_Table$Calories <- as.numeric(Food_Display_Table$Calories)

```

该代码将字符版本的`Calories`数据替换为相同数据的数字版本。您可以使用相同的类函数仔细检查数据类型，如下所示:

```
class(Food_Display_Table$Calories)

```

这一次控制台应该返回“数字”。在进入这个图之前，我们仍然需要为`Portion_Amount`列做这件事。遵循上面我们用于`Calories`的相同过程。一旦一切完成，你应该在你的控制台屏幕上看到类似图 [3-3](#Fig3) 的东西。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig3_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig3_HTML.jpg)

图 3-3

更改数据类型

#### 情节

现在我们准备制作一个情节。在控制台窗口中键入以下代码:

```
plot(Food_Display_Table$Calories, Food_Display_Table$Portion_Amount)

```

现在，图选项卡中的一个图将会出现，类似于图 [3-4](#Fig4) 。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig4_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig4_HTML.jpg)

图 3-4

R 中的绘图

图 [3-4](#Fig4) 在 Y 轴上显示卡路里，在 X 轴上显示`Portion_Amount`。这是一个非常基本的图，但它足以暗示这些数据点之间的关系。在某一点上，您将了解到扩展 base R 并实现更好的可视化的包，但是它们在 Plots 选项卡中的工作方式基本上是相同的。

### 包装

下一个标签为“Packages”的选项卡将显示您可用的 R 包列表。参见图 [3-5](#Fig5) 查看包列表。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig5_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig5_HTML.jpg)

图 3-5

包查看器

一个 R 包是你在第 [1](01.html) 章安装 R 时得到的基本 R 系统的扩展。r 包由社区贡献者编写，任何人都可以使用。软件包也由 CRAN 网络管理，您可以从您的软件包选项卡管理所有这些。

您在图 [3-5](#Fig5) 的截图中看到的是您计算机上安装的所有软件包的列表。复选标记表示该包已经加载到 R 环境中，可以使用了。如果您选中一个包，加载该包的代码将出现在您的控制台屏幕上。

例如，要使用 broom 包，我们只需单击复选框，在控制台屏幕中就会出现:

```
library("broom", lib.loc="/Library/Frameworks/R.framework/Versions/3.5/Resources/library")

```

确切的位置取决于 R 的版本和您使用的操作系统。一旦以这种方式加载了一个包，该包的所有数据集和函数就可以像我们之前使用的 base R 函数一样使用了。

### 注意

broom 包是 tidyverse 系列 R 包的一部分。Broom 用于将线性回归等分析函数的复杂输出转换为简单的数据框，该数据框易于用作其他函数的输入。我们将在本书的后面更多地讨论像这样的必备包。

您还可以在 Packages 选项卡中使用此界面来安装软件包。如果您知道您想要的软件包的名称，只需点击“安装”按钮即可得到如图 [3-6](#Fig6) 所示的对话框。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig6_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig6_HTML.jpg)

图 3-6

r 包标签

然后输入您想要的软件包名称，并单击“安装”按钮。保留默认设置，因为这将为您提供 CRAN 网络上可用的所有软件包。

最后，出现的每个包名都是一个超链接，您可以使用它来访问该包的文档。安装软件包时会安装该文档。只需点击软件包名称，了解如何使用该软件包。这将自动将您带到显示在您的包选项卡右侧的帮助小部件。

### 帮助

“帮助”选项卡的设置类似于 web 浏览器，包括帮助您搜索主题的元素。如图 [3-7](#Fig7) 所示，您可以浏览网页内容。

![../images/478254_1_En_3_Chapter/478254_1_En_3_Fig7_HTML.jpg](../images/478254_1_En_3_Chapter/478254_1_En_3_Fig7_HTML.jpg)

图 3-7

帮助选项卡

在图 [3-7](#Fig7) 所示的屏幕中，您可以看到名为`ggplot2`的`tidyverse`包的文档。这个软件包将帮助您创建比使用基本绘图功能更丰富的数据可视化。您可以使用帮助屏幕来了解更多关于此类包的信息，或者通过使用搜索功能来获得特定功能的帮助。

### 电视观众

右下方年份中的最后一个选项卡是“查看器”选项卡。这是 RStudio 报告的一些更高级功能(如 R markdown 文档)的输出区域。R markdown 文档用于以可再现的方式将代码和结果一起呈现，用于共享结果。我们将在本书的后面讨论 R markdown。

## 结论

至此，您已经具备了使用 RStudio IDE 的坚实基础。您应该了解如何使用 RStudio 中默认状态下可用的四个面板中的所有功能，在进行快速分析所需的所有窗格和界面中导航。

在这个过程中，我们还探讨了如何使用 base R 进行一些数据管理、数据探索和数据可视化。

接下来，我们将继续探索 RStudio 如何帮助我们保持条理，并构建清晰、有见地且可重复的分析。